---
id: 678
title: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è SMA –≤ Windows Azure Pack
date: 2014-06-23T17:13:27+00:00
author: rootilo
layout: post
guid: http://4c74356b41.com/post678
permalink: /post678
categories:
  - Azure Pack
  - Virtualization and Cloud
tags:
  - Guide
  - Service Management Automation
  - SMA
  - WAPack Express
  - Windows Azure Pack
---
–í –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏ –ø–æ—Å—Ç–∞ –æ–± [—É—Å—Ç–∞–Ω–æ–≤–∫–µ SMA](http://4c74356b41.com/post532)¬†–º—ã –ø–æ–¥–∫–ª—é—á–∏–º SMA –∫ WAP –∏ –ø–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –±–∞–∑–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è endpoint&#8217;–∞ SMA –≤ WAP –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ [SPF –≤ WAP](http://4c74356b41.com/post466). –° —Ç–æ–π –ª–∏—à—å —Ä–∞–∑–Ω–∏—Ü–µ–π¬†—á—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ¬†–ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∞—Ö¬†VM Clouds –∏–ª–∏ Automation.
  
–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –í–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å endpoint –≤–∏–¥–∞ &#8220;https://–∏–º—è\_web\_services\_—Ö–æ—Å—Ç–∞\_SMA:9090/&#8221; –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –æ–±–ª–∞–¥–∞–µ—Ç –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SMA.
  
<a href="http://4c74356b41.com/wp-content/uploads/2016/02/sma_register_011.png" rel="attachment wp-att-4875"><img src="http://4c74356b41.com/wp-content/uploads/2016/02/sma_register_011-300x141.png" alt="sma_register_011" width="300" height="141" /></a>

<a href="http://4c74356b41.com/wp-content/uploads/2016/02/sma_register1.png" rel="attachment wp-att-4880"><img src="http://4c74356b41.com/wp-content/uploads/2016/02/sma_register1-300x204.png" alt="sma_register1" width="300" height="204" /></a>

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ SMA, –í—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–∫–ª–∞–¥–∫–æ–π Automation.

<a href="http://4c74356b41.com/wp-content/uploads/2016/02/sma_basic.jpg" rel="attachment wp-att-4857"><img src="http://4c74356b41.com/wp-content/uploads/2016/02/sma_basic-300x225.jpg" alt="sma_basic" width="300" height="225" /></a>.

–ù–∞ –¥–∞–Ω–Ω–æ–º dashboard&#8217;–µ –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å—é –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ runbook&#8217;–∞—Ö –∏ –∑–∞–¥–∞–Ω–∏—è—Ö. –ò—Å–ø–æ–ª—å–∑—É—è –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º—ã –Ω–∞–¥ –≥—Ä–∞—Ñ–∏–∫–æ–º –í—ã –º–æ–∂–µ—Ç–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—É—é –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ü–æ –∫–ª–∏–∫—É –Ω–∞ runbook –í–∞–º –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π dashboard –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É runbook&#8217;—É.
  
–í –∑–∞–∫–ª–∞–¥–∫–µ Assets –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤—Å–µ –≤–∞—à–∏ &#8220;–∞–∫—Ç–∏–≤—ã&#8221;. –ú–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ –≤ SMA, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. –í—Å–µ —ç—Ç–æ –º–æ–∂–Ω–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–≤–æ–∏—Ö runbook&#8217;–∞—Ö.

–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ runbook&#8217;–∞
  
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π runbook –º–æ–∂–Ω–æ –∏–∑ –º–µ–Ω—é —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –∏ —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è,¬†–æ–ø–∏—Å–∞–Ω–∏—è –∏ —Ç–µ–≥–∞¬†runbook&#8217;–∞.
  
–ü–æ—Å–ª–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫—Ä—ã—Ç—å dashboard —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ runbook&#8217;–∞ –∏ –≤—ã–±—Ä–∞—Ç—å –≤–∫–ª–∞–¥–∫—É &#8220;Author&#8221;. –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ runbook&#8217;–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–æ–≤–∞ –±—É–¥–µ—Ç –ø—Ä–æ–π—Ç–∏ –≤–æ –≤–∫–ª–∞–¥–∫—É &#8220;Author&#8221; runbook&#8217;–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.
  
–î–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è runbook&#8217;–∞ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–æ–±—ã—Ç–∏–µ–º –≤ WAP –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫—Ä—ã—Ç—å¬†VM Clouds –¥–∞–ª–µ–µ –≤–æ –ø—Ä–æ–π—Ç–∏ –≤–æ –≤–∫–ª–∞–¥–∫—É Automation –∏ —Å–≤—è–∑–∞—Ç—å runbook —Å —Å–æ–±—ã—Ç–∏–µ–º. –î–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ runbook&#8217;–æ–≤ –∫ —Å–æ–±—ã—Ç–∏—è–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å runbook&#8217;—É —Ç—ç–≥ &#8220;SPF&#8221;. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ runbook&#8217;–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ä–æ–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

<a href="http://4c74356b41.com/wp-content/uploads/2016/02/sma-bind.jpg" rel="attachment wp-att-4886"><img src="http://4c74356b41.com/wp-content/uploads/2016/02/sma-bind-300x199.jpg" alt="sma-bind" width="300" height="199" /></a>

–î–ª—è —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ä–∞–Ω–±—É–∫ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:

workflow Test-Runbook
  
{
  
$a = Get-Date
  
Write-Output &#8220;–†–∞–Ω–±—É–∫ –∑–∞–ø—É—â–µ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ –≤¬†$a&#8221;
  
}

–ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ —Ä–∞–Ω–±—É–∫–∞ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç &#8220;–≤–µ—Ä–Ω—É—Ç—å&#8221; –≤ SMA —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è—Ö –∑–∞–¥–∞–Ω–∏—è.

<a href="http://4c74356b41.com/wp-content/uploads/2016/02/sma-details.jpg" rel="attachment wp-att-4889"><img src="http://4c74356b41.com/wp-content/uploads/2016/02/sma-details-300x246.jpg" alt="sma-details" width="300" height="246" /></a>

–ò –≤ –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è —ç–∫—Ä–∞–Ω–µ –≤ —Å–∞–º–æ–º –Ω–∏–∑—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

<a href="http://4c74356b41.com/wp-content/uploads/2016/02/sma-output.jpg" rel="attachment wp-att-4893"><img src="http://4c74356b41.com/wp-content/uploads/2016/02/sma-output-300x30.jpg" alt="sma-output" width="300" height="30" /></a>

–ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SMA –≤ –±–ª–∏–∂–∞–π—â–µ–µ –≤—Ä–µ–º—è.

Troubleshooting
  
–í—ã –º–æ–∂–µ—Ç–µ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å &#8220;–∑–∞–±–∞–≤–Ω–æ–π&#8221; –ø—Ä–æ–±–ª–µ–º–æ–π, –∫–æ–≥–¥–∞ —É –í–∞—Å —É—Å–ø–µ—à–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è endpoint –≤ WAP, –Ω–æ –≤ SPF –Ω–µ—Ç. –û–± —ç—Ç–æ–º –í—ã –º–æ–∂–µ—Ç–µ &#8220;—É–∑–Ω–∞—Ç—å&#8221; –∑–∞–π–¥—è –≤ –∑–∞–∫–ª–∞–¥–∫—É Automation, —Ä–∞–∑–¥–µ–ª–∞ VM Clouds –∏ —É–≤–∏–¥–µ—Ç—å —á—Ç–æ —É –í–∞—Å –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω SMA, —Ö–æ—Ç—è –∑–∞–∫–ª–∞–¥–∫–∞ Automation —É–±–µ–∂–¥–∞–µ—Ç –í–∞—Å —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ SMA –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω.
  
–í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é SMA –∏–∑ WAP –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é.

```
$Credential = Get-Credential
$Token = Get-MgmtSvcToken -Type Windows -AuthenticationSite https://yourauthenticationsite:30072 -ClientRealm http://azureservices/AdminSite -User $Credential -DisableCertificateValidation
Get-MgmtSvcResourceProvider -AdminUri "https://localhost:30004" -Token $Token -DisableCertificateValidation -name "Automation"
Remove-MgmtSvcResourceProvider -AdminUri "https://localhost:30004" -Token $Token -DisableCertificateValidation -Name "Automation" -InstanceId "–ò–Ω—Å—Ç–∞–Ω—Å_ID_–∏–∑_Get-MgmtSvcResourceProvider"
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –í—ã —Å–º–æ–∂–µ—Ç–µ —Å–Ω–æ–≤–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å SMA –≤ WAP. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º —á—Ç–æ –æ—à–∏–±–∫–∞ –Ω–µ –∏—Å—á–µ–∑–Ω–µ—Ç. üòâ

```
Import-Module SPFAdmin
Get-SCSpfStamp | fl
$Stamp = Get-SCSpfStamp -Name "–∏–º—è_Stamp_vmm"
New-SCSpfServer -Name "IaasAutomation" "ServerType None -Stamps $Stamp
$srv = Get-SCSpfServer -Name "IaasAutomation"
New-SCSpfSetting -Name EndpointURL -SettingType EndpointconnectionString -Value "https://SMAhostname:9090/" -Server $srv
```

–° –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ –í—ã —Å–æ–∑–¥–∞–¥–∏—Ç–µ –∑–∞–ø–∏—Å—å SMA –≤ –±–∞–∑–µ SPF.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å spf-app-pool –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –≥—Ä—É–ø–ø—É smaAdminGroup –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ SMA<a href="http://4c74356b41.com/wp-content/uploads/2016/02/smaadmingroup.png" rel="attachment wp-att-4883"><img src="http://4c74356b41.com/wp-content/uploads/2016/02/smaadmingroup-300x69.png" alt="smaadmingroup" width="300" height="69" /></a>